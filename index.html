<!doctype html>
<html lang="en">
  <head>
<style>
body {
  padding-top: 5rem;
}

.map {
  height: 400px;
  width: 100%;
}

select {
  text-align: center;
}

#notification-container {
  text-align: center;
}

.table-scroll {
  height: 400px;
  direction: rtl;
  overflow-y: auto;
}

#table-container {
  text-align: center;
}

#step-container { 
  text-align: center;
  cursor: pointer;
}

#step-container tr.selected {
  font-weight: bold;
}

#step-container tr.current {
  background-image: linear-gradient(to right, rgba(0,0,0,0), rgba(124,181,236,0.25), rgba(0,0,0,0));
}

#step-container tr:hover {
  background-image: linear-gradient(to right, rgba(0,0,0,0), rgba(124,181,236,0.25), rgba(0,0,0,0));
}

</style>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- OpenLayers CSS -->
 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>

 <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
   integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
   crossorigin=""></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <title>Paleomagnetism.org 2.0.0</title>
  </head>

  <body>

    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">

      <a class="navbar-brand" href="#">Paleomagnetism.org</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">

          <li class="nav-item">
            <a class="nav-link" href="#">Home</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="#">Interpretation</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Statistics</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Tectonics</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Magnetostratigraphy</a>
          </li>
        </ul>

        <form class="form-inline my-2 my-lg-0">
          <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Find Publication</button>
        </form>
      </div>

    </nav>

    <div class="container">

      <div id="notification-container"></div>

      <!-- Tab Headers -->
      <nav>
        <div class="nav nav-tabs nav-justified" id="nav-tab" role="tablist">
          <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Data Import</a>
          <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Interpretation</a>
          <a class="nav-item nav-link" id="nav-fitting-tab" data-toggle="tab" href="#nav-fitting" role="tab" aria-controls="nav-profile" aria-selected="false">Components and Fitting</a>
          <a class="nav-item nav-link" id="nav-settings-tab" data-toggle="tab" href="#nav-settings" role="tab" aria-controls="nav-settings" aria-selected="false">Settings and Export</a>
        </div>
      </nav>

      <div class="tab-content">

        <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
          <br>
          Data from various formats can be imported to Paleomagnetism.org. Select the appropriate type and select a file to read from disk.
          <hr>
          <form>

            <div class="input-group mb-6">

              <div class="input-group-prepend">
                <label class="input-group-text" for="format-selection">Data Format</label>
              </div>

              <select class="custom-select" id="format-selection">
                <option value="UTRECHT">Utrecht University</option>
                <option value="PALEOMAC">PaleoMac Software</option>
                <option value="OXFORD">University of Oxford</option>
                <option value="MUNICH">University of Munich</option>
                <option value="NGU">Geological Survey of Norway</option>
                <option value="BCN2G">University of Barcelona</option>
                <option value="HELSINKI">Helsinki University</option>
                <option value="CALTECH">Caltech Institute of Technology</option>
                <option value="PMAGORG">Paleomagnetism.org</option>
              </select>

              <div class="custom-file">
                <input type="file" class="custom-file-input" id="customFile" multiple>
                <label class="custom-file-label" for="customFile">Select</label>
              </div>

            </div>
          </form>
        </div>

        <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">

          <br>
          
          <!-- Specimen Scroller -->
          <div class="input-group">
            <div class="input-group-prepend">
              <button onclick='handleSpecimenScroll(-1)' type="button" class="btn btn-primary btn-lg"><</button>
            </div>
            <select class="custom-select custom-select-lg" id="specimen-select"></select>
            <div class="input-group-append">
              <button onclick='handleSpecimenScroll(1)' type="button" class="btn btn-primary btn-lg">></button>
           </div>
          </div>
          
          <br>

          <!-- Specimen information -->
          <div class="table-responsive"><table id="table-container" class="table table-sm table-striped"></table></div>

          <hr>
          
          <div class="container">
			<div class="row">
			  <div class="col-md-2">
     
                <div class="btn-group d-flex btn-group-toggle" data-toggle="buttons">
                  <label value="TH" class="demagnetization-type-radio btn btn-sm btn-light w-100 active">
                    <input type="radio" name="options" id="option1" autocomplete="off" checked> <span style="pointer-events: none;" class='text-danger'><i class="fas fa-fire"></i> <b></b></span>
                  </label>
                  <label value="AF" class="demagnetization-type-radio btn btn-sm btn-light w-100">
                    <input type="radio" name="options" id="option2" autocomplete="off"> <span style="pointer-events: none;" class='text-primary'><i class="fas fa-bolt"></i> <b></b></span>
                  </label>
                  <label value="OT" class="demagnetization-type-radio btn btn-sm btn-light w-100">
                    <input type="radio" name="options" id="option3" autocomplete="off"> <span style="pointer-events: none;" class='text-success'><i class="fas fa-question"></i> <b></b></span>
                  </label>
                </div>
                <br>
                <div class="table-scroll">
			  	  <table class="table table-sm" id="step-container"></table>
			    </div>
			  </div>
			  <div class="col-md-5">
			  	<div id="zijderveld-container"></div>
			  </div>
			  <div class="col-md-5">
			  	<div id="hemisphere-container"></div>
			  </div>
			</div>
			<br>

			<div class="row">
			  <div class="col-md-12">
                <hr>
			  	<div id="interpretation-table-container"></div>
                <hr>
			  </div>
			</div>

			<div class="row">
			  <div class="col-md-12">
			  	<div id="intensity-container"></div>
                  <figcaption class="figure-caption">Figure showing the resultant magnetization, vector difference sum, and the unblocking spectrum.</figcaption>
			  </div>
			</div>

          </div>
        
        </div>

        <div class="tab-pane fade" id="nav-fitting" role="tabpanel" aria-labelledby="nav-settings-tab">
          <br>
          <div class="row justify-content-md-center">
            <div class="col-md-6 ">
              <div id="fitting-container"></div>
              <figcaption class="figure-caption">Figure showing interpreted components. Great circles can be fitted to directional set points by pressing <b>9</b> in all reference coordinates (McFadden & McElhinny, 1992).</figcaption>
              <hr>
            </div>
          </div>
          <div class="row justify-content-md-center">
            <div class="col-md-6 ">
			 <table class='table table-sm table-striped' id="fitted-table-container"></table>
            </div>
          </div>
          <div class="row justify-content-md-center">
            <div class="col-md-6 ">
              <div class='text-center'>
                <button onclick="downloadInterpretations()" type="button" class="btn btn-primary">Download Interpretations</button>
                <button onclick="downloadInterpretations(true)" type="button" class="btn btn-primary">Download Interpretations (Fitted)</button>
              </div>
            </div>
          </div>
          
        </div>

        <div class="tab-pane fade" id="nav-settings" role="tabpanel" aria-labelledby="nav-settings-tab">
          <br>
          <h2> Data Export </h2>
          <button onclick="downloadAsJSON()" type="button" class="btn btn-primary">Download application save</button>
          <br>
          <h2> Sorting </h2>
          <button onclick="sortSamples('name')" type="button" class="btn btn-primary">Name</button>
          <button onclick="sortSamples('bogo')" type="button" class="btn btn-primary">Bogo</button>
          <hr>

          <h5> Keyboard Shortcuts</h5>
          <small>
            <table class="table table-sm table-striped table-responsive text-center">
              <tr>
                <td>Previous Specimen</td>
                <td>Next Specimen</td>
                <td>Previous Step</td>
                <td>Next Step</td>
                <td>Select Step</td>
                <td>Hide Step</td>
                <td>PCA (Direction)</td>
                <td>PCA (Plane)</td>
                <td>Anchor Component</td>
                <td>Cycle Projection</td>
                <td>Cycle Coordinates</td>
                <td>Fit Great Circles</td>
                <td>Change Group</td>
              </tr>
                <td>Left, A</td>
                <td>Right, D</td>
                <td>Up, W</td>
                <td>Down, S</td>
                <td>Plus, X</td>
                <td>Minus, Z</td>
                <td>1</td>
                <td>2</td>
                <td>Control</td>
                <td>3</td>
                <td>8</td>
                <td>9</td>
                <td>g</td>
            </table>
          </small>
        
          <h2> Application Save </h2>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="auto-save" value="option1" checked>
            <label class="form-check-label" for="auto-save"> Auto-save to local storage</label>
          </div>
        
          <h2> Application Reset </h2>
          <button onclick="clearLocalStorage()" type="button" class="btn btn-danger">Reset Local Storage</button>
        
        </div>

      </div>

    <hr>

    <footer id='footer-container' class='container text-muted'></footer>

    <br> 
    <div class="row justify-content-md-center text-center">
	  <div style="text-align: right; display: inline-block;">
	    <a href="http://www.geo.uu.nl/~forth/"><img style="margin: 0px; height: 60px;" src="./images/UU.png"></a>
        <a href="http://erc.europa.eu/"><img style="margin: 0px; height: 60px;" src="./images/ERC.png"></a>
	    <a href="http://www.nwo.nl/"><img style="margin: 0px; height: 60px;" src="./images/NWO_logo_plain.png"></a>
	  </div>
	</div>

    <br>

<!-- Confirmation Modal -->
<div class="modal fade" id="exampleModal2" tabindex="1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirm</h5>
      </div>
      <div id="prompt-question" class="modal-body"></div>
      <div class="modal-footer">
        <button id="confirm-button" type="button" class="btn btn-success" data-dismiss="modal">Confirm</button>
        <button id="cancel-button" type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<!-- Leaflet Map Modal -->
<div class="modal fade" id="map-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"><i class='fas fa-map-marker-alt'></i> &nbsp; Select Specimen location</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <!-- Latitude, Longitude container -->
        <div class="row">
          <div class="col">
            <div class="input-group mb-6">
              <input id='specimen-longitude-input' type="text" class="form-control input-sm" placeholder="Longitude">
              <div class="input-group-append">
                <div class="input-group-text">°E</div>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="input-group mb-6">
            <input id='specimen-latitude-input' type="text" class="form-control input-sm" placeholder="Latitude">
              <div class="input-group-append">
                <div class="input-group-text">°N</div>
              </div>
            </div>
          </div>
        </div>

        <br>

        <div id="map" class="map"></div>
        <p><figcaption class="figure-caption">Click the map to select a location.</figcaption>

      </div>
      <div class="modal-footer">
        <div class="mr-auto">
          <button id="save-location" type="button" class="btn btn-primary">Save Location</button>
          &nbsp;
          <div class="form-check form-check-inline">
            <input type="checkbox" class="form-check-input" id="location-apply-all">
            <label class="form-check-label" for="location-apply-all">Apply to all</label>
          </div>
        </div>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>

    <!-- Include OpenLayers -->
    <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.2.0/build/ol.js"></script>

    <script src="./numeric.js"></script>

    <script src="./graphs-p.js"></script>
    <script src="./publications.json"></script>
    <script src="./Exception.js"></script>
    <script src="./Direction.js"></script>

    <script src="./Coordinates.js"></script>
    <script src="./importing.js"></script>
    <script src="./index.js"></script>

  </body>
</html>
