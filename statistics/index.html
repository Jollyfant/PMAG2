<!DOCTYPE html>

<html lang="en">

  <head>

    <!-- Required metadata tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Paleomagnetism.org 2 - An online environment for paleomagnetic analysis">
    <meta name="keywords" content="paleomagnetism, interpretation, zijderveld, pca">

    <meta name="author" content="Mathijs Koymans">

    <link rel="shortcut icon" type="image/x-icon" href="../resources/images/hades-icon.png"/>

    <link rel="stylesheet" href="../css/style.css">

    <!-- Bootstrap & Font Awesome CSS & Leaflet -->
    <link rel="stylesheet" href="../lib/bootstrap-4.3.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../lib/fontawesome-free-5.7.2-web/css/all.css">
    <link rel="stylesheet" href="../lib/leaflet-1.4.0/leaflet.css">

    <!-- Bootstrap Select -->
    <link rel="stylesheet" href="../lib/bootstrap-select-1.13.6/dist/css/bootstrap-select.min.css">

  </head>

  <body>

    <!-- Header -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">

      <a class="navbar-brand" href="http://www.paleomagnetism.org">Paleomagnetism<span class="text-danger">.org</span></a>

      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="../interpretation">Interpretation</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="../statistics">Statistics</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../geography">Geography</a>
          </li>
          <li class="nav-item">
            <span class="nav-link disabled" href="#">|</span></li>
          <li class="nav-item">
            <a class="nav-link" href="../references">References</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../team">Team & Contact</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../magic">MagIC Interface</a>
          </li>
        </ul>

        <form class="form-inline my-2 my-lg-0">
          <a href="../library" class="btn btn-sm btn-secondary my-2 my-sm-0"><i class="fas fa-book-open"></i><b>&nbsp; Data Library</b></a>
        </form>

      </div>

    </nav>

    <!-- Main body -->
    <div class="container">

      <!-- Container for user notifications -->
      <div id="notification-container"></div>

      <!-- Specimen Scroller -->
      <div class="input-group">
        <select class="selectpicker form-control text-center" data-actions-box="true" id="specimen-select" title="Select one or multiple collections" multiple></select>
      </div>

      <br>

      <!-- Tab Headers -->
      <nav>
        <div class="nav nav-tabs nav-justified" id="nav-tab" role="tablist">
          <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Data Import</a>
          <a class="nav-item nav-link disabled" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Directions</a>
          <a class="nav-item nav-link disabled" id="nav-fitting-tab" data-toggle="tab" href="#nav-fitting" role="tab" aria-controls="nav-profile" aria-selected="false">Means</a>
          <a class="nav-item nav-link disabled" id="nav-ctmd-tab" data-toggle="tab" href="#nav-ctmd" role="tab" aria-controls="nav-ctmd" aria-selected="false">CTMD</a>
          <a class="nav-item nav-link disabled" id="nav-foldtest-tab" data-toggle="tab" href="#nav-foldtest" role="tab" aria-controls="nav-foldtest" aria-selected="false">Foldtest</a>
          <a class="nav-item nav-link disabled" id="nav-shallowing-tab" data-toggle="tab" href="#nav-shallowing" role="tab" aria-controls="nav-shallowing" aria-selected="false">E-I Shallowing</a>
          <a class="nav-item nav-link" id="nav-settings-tab" data-toggle="tab" href="#nav-settings" role="tab" aria-controls="nav-settings" aria-selected="false">Settings</a>

        </div>
      </nav>


      <div class="tab-content">

        <!-- Tab for data importing -->
        <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">

          <br>

          <div class="alert alert-light" role="alert">
            <h5> Paleomagnetism.org 2 - Statistics </h5>
            <p> Data from the Paleomagnetism 2.0.0 .dir format can be imported to the statistics portal. Each selected file will be associated with a new selectable collection. An example of the <b>default</b> input file can be found <a href="../resources/formats/default.csv">here</a>.
          </div>

          <div class="input-group mb-6">

            <!-- File input -->
            <div class="custom-file">
              <input type="file" class="custom-file-input" id="customFile" multiple>
              <label class="custom-file-label" for="customFile"><i class="fas fa-search"></i> Select files </label>
            </div>

            &nbsp;

            <!-- Format type selector -->
            <div class="input-group-prepend">
              <label class="input-group-text" for="format-selection">Data Format &nbsp; <small><i class="fas fa-angle-right"></i></small></label>
            </div>

            <select class="custom-select" id="format-selection">
              <optgroup label="Application Formats">
                <option value="PMAG2">Paleomagnetism.org (2.0.0 .pmag) </option>
                <option value="DIR2">Paleomagnetism.org (2.0.0 .dir)</option>
                <option value="PMAG">Paleomagnetism.org (1.0.0 .pmag) </option>
              </optgroup>
              <optgroup label="Text Formats">
                <option value="CSV">Default Format (.csv)</option>
              </optgroup>
            </select>

            <div class="input-group-append">
              <div class="input-group-text">
                <input id="append-input" type="checkbox" aria-label="Checkbox for following text input">
                <label class="form-check-label" for="append-input">
                  &nbsp; Append
                </label>
              </div>
            </div>

            &nbsp;

          </div>

        </div>


        <!-- Tab for data interpretation -->
        <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">

          <br>

          <div class="alert alert-light alert-dismissible fade show" role="alert">
            <h5> Statistics - Geomagnetic Directions </h5>
            <p> Figures showing the selected collections and their geomagnetic directions & <b>distribution</b> of virtual geomagnetic poles. The right figure does not show actual VGP positions. The table lists standard Fisher parameters for this set of directions. When multiple collections are selected, its components will be combined before a cutoff is applied. Press <b>8</b> and <b>5</b> to switch between coordinate frames and confidence ellipses respectively.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="container">
            <div class="row">

              <div class="table-responsive">
                <table class='table table-sm text-center table-striped' id="direction-table"></table>
              </div>

              <!-- ChRM Directions -->
	          <div class="col-lg-6">
                <div id="direction-container"></div>
	          </div>

              <!-- VGPs -->
              <div class="col-lg-6">
                <div id="pole-container"></div>
	          </div>

            </div>

            <div class="text-right">
	          <button class="btn btn-sm btn-light" id="export-png"><i class="far fa-file-image"></i> PNG</button>
	          <button class="btn btn-sm btn-light" id="export-svg"><i class="far fa-file-image"></i> SVG</button>
	          <button class="btn btn-sm btn-light" id="export-pdf"><i class="far fa-file-image"></i> PDF</button>
            </div>

          </div>

        </div>

        <!-- Tab for fitting great circles to directions -->
        <div class="tab-pane fade" id="nav-fitting" role="tabpanel" aria-labelledby="nav-settings-tab">

          <br>

          <div class="alert alert-light alert-dismissible fade show" role="alert">
            <h5> Statistics - Mean Geomagnetic Directions </h5>
            <p> Figures showing the mean direction of the mean of all selected collections seperately. Press <b>8</b> to switch between coordinate frames. The selected cutoff is applied to each collection.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="container">
            <div class="row justify-content-md-center">

              <div class="table-responsive">
                <table class='table table-sm text-center table-striped' id="mean-table"></table>
              </div>

              <!-- ChRM Directions -->
	          <div class="col-lg-6">
                <div id="mean-container"></div>
	          </div>

            </div>
          </div>

        </div>

        <!-- Tab for fitting great circles to directions -->
        <div class="tab-pane fade" id="nav-ctmd" role="tabpanel" aria-labelledby="nav-settings-tab">

          <br>

          <div class="alert alert-light alert-dismissible fade show" role="alert">

            <h5> Statistics - Common True Mean Directions </h5>
            <p> Figures showing <b>1000</b> bootstrapped mean coordinates for the selected collections following the approach of <a href='../references'>Tauxe et al., 2014</a>. Select two collections and click <b>initialize</b> to begin the bootstrap. Overlapping distributions indicidate that two collections are the same within confidence limits.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

              <p> <button onclick="bootstrapCTMD()" type="button" class="btn btn-sm pull-right btn-primary"><i class="fas fa-play"></i> <b>Initialize</b></button> <button onclick="createCTMDGrid()" type="button" class="btn btn-sm pull-right btn-success"><i class="fas fa-th"></i> <b>Grid View</b></button>

          <div class="container">

            <div class="row justify-content-md-center">

              <div id="permutation-table"></div>

              <div class="table-responsive">
                <table class='table table-sm text-center table-striped' id="bootstrap-table"></table>
              </div>

              <!-- ChRM Directions -->
	          <div class="col-lg-4">
                <div id="ctmd-container-x"></div>
	          </div>
	          <div class="col-lg-4">
                <div id="ctmd-container-y"></div>
	          </div>
	          <div class="col-lg-4">
                <div id="ctmd-container-z"></div>
	          </div>

            </div>

            <br>


            <div class="text-right">

	          <button class="btn btn-sm btn-light" id="export-bootstrap-png"><i class="far fa-file-image"></i> PNG</button>
	          <button class="btn btn-sm btn-light" id="export-bootstrap-svg"><i class="far fa-file-image"></i> SVG</button>
	          <button class="btn btn-sm btn-light" id="export-bootstrap-pdf"><i class="far fa-file-image"></i> PDF</button>
            </div>

          </div>

        </div>

        <!-- Tab for fitting great circles to directions -->
        <div class="tab-pane fade" id="nav-foldtest" role="tabpanel" aria-labelledby="nav-settings-tab">

          <br>

          <div class="alert alert-light alert-dismissible fade show" role="alert">

            <h5> Statistics - Foldtest </h5>
            <p> This module allows the user to do a classical foldtest (<a href="../references">Tauxe & Watson, 1994</a>) on one or multiple collections. <b>No cutoff will be applied</b>. Select any number of collections and click <b>initialize</b> to start. 
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="input-group mb-3">
            <div class="btn-group-toggle" data-toggle="buttons">
              <label class="btn btn-sm btn-success active">
                <input id="foldtest-bootstrap-checkbox" type="checkbox" checked autocomplete="off"><i class="fas fa-dice"></i>
              </label>
            </div>
&nbsp;
              <p> <button onclick="bootstrapFoldtest()" type="button" class="btn btn-sm pull-right btn-primary"><i class="fas fa-play"></i> <b>Initialize</b></button>

          </div>

            <div class="progress">
              <div id="foldtest-progress" class="progress-bar progress-bar-striped progress-bar-animated" style="width: 0%; transition: none;"></div>
            </div> 

          <div class="container">

            <div class="row">

              <!-- In geographic coordinates -->
	          <div class="col-lg-6">
                <div id="foldtest-geographic-container"></div>
	          </div>

              <!-- In tectonic coordinates -->
	          <div class="col-lg-6">
                <div id="foldtest-tectonic-container"></div>
	          </div>

            </div>

            <!-- Container for the foldtest itself -->
            <div class="row">
	          <div class="col-lg-12">
                <div id="foldtest-full-container"></div>
	          </div>
            </div>

          </div>

            <div class="text-right">
                  <button class="btn btn-sm btn-light" id="export-foldtest-png"><i class="far fa-file-image"></i> PNG</button>
                  <button class="btn btn-sm btn-light" id="export-foldtest-svg"><i class="far fa-file-image"></i> SVG</button>
                  <button class="btn btn-sm btn-light" id="export-foldtest-pdf"><i class="far fa-file-image"></i> PDF</button>
            </div>

        </div>

        <!-- Tab for fitting great circles to directions -->
        <div class="tab-pane fade" id="nav-shallowing" role="tabpanel" aria-labelledby="nav-settings-tab">

          <br>

          <div class="alert alert-light" role="alert">
            <h5> Statistics - Shallowing </h5>
            <p>  The inclination shallowing module unflattens observed inclinations in sediments to fit with the TK03.GAD Field Model (<a href="../references">Tauxe et al., 2008</a>) based on the relationship between the expected elongation (E) (τ2/τ3) and inclination. The flattening function of (King, 1955) is applied. A single collection can be selected and a cutoff will be applied. <b>A minimum of 80 directions are required</b>. The procedure can be bootstrapped <b>1000</b> times to find its confidence limits.

            <div class="input-group mb-3">
              <div class="btn-group-toggle" data-toggle="buttons">
                <label class="btn btn-sm btn-success active">
                  <input id="shallowing-bootstrap-checkbox" type="checkbox" checked autocomplete="off"><i class="fas fa-dice"></i>
                </label>
              </div>
&nbsp;
              <p> <button onclick="bootstrapShallowing()" type="button" class="btn btn-sm pull-right btn-primary"><i class="fas fa-play"></i> <b>Initialize</b></button>

          </div>

            <div class="progress">
              <div id="shallowing-progress" class="progress-bar progress-bar-striped progress-bar-animated" style="width: 0%; transition: none;"></div>
            </div> 
        </div>

         <div class="row">
           <div class="col-lg-12">
             <div id="ei-bootstrap-container"></div>
            </div>
         </div>

         <div class="row">
	   <div class="col-lg-12">
             <div id="ei-cdf-container"></div>
	    </div>
         </div>

            <div class="text-right">
                  <button class="btn btn-sm btn-light" id="export-shallowing-png"><i class="far fa-file-image"></i> PNG</button>
                  <button class="btn btn-sm btn-light" id="export-shallowing-svg"><i class="far fa-file-image"></i> SVG</button>
                  <button class="btn btn-sm btn-light" id="export-shallowing-pdf"><i class="far fa-file-image"></i> PDF</button>
            </div>

        </div>

        <!-- Tab for settings & preferences --> 
        <div class="tab-pane fade" id="nav-settings" role="tabpanel" aria-labelledby="nav-settings-tab">

          <br>

          <!-- Cutoff selector -->
          <h5> Select Cutoff and Polarity</h5>
          <p> A pole-cutoff can be selected that will be applied in particular modules. Directions can be normalized to a particuar polarity.
          <div class="input-group mb-6">

            <div class="input-group-prepend">
              <label class="input-group-text" for="cutoff-selection"><i class="fas fa-cut"></i> &nbsp; Direction Cutoff &nbsp; <small><i class="fas fa-angle-right"></i></small></label>
            </div>

            <select class="custom-select" id="cutoff-selection">
              <optgroup label="Recommended Cutoffs">
                <option value="CUTOFF45">45 Cutoff</option>
              </optgroup>
              <optgroup label="Other Cutoffs">
                <option value="VANDAMME">Vandamme</option>
                <option value="KRIJGSMAN">Krijgsman</option>
                <option value="">None</option>
              </optgroup>
            </select>

            <div class="input-group-prepend">
              <label class="input-group-text" for="polarity-selection"><i class="fas fa-adjust"></i> &nbsp; Normalize Polarity &nbsp; <small><i class="fas fa-angle-right"></i></small></label>
            </div>

            <select class="custom-select" id="polarity-selection">
              <option value="">None</option>
              <optgroup label="Normalize to">
                <option value="NORMAL">Positive Polarity</option>
                <option value="REVERSED">Negative Polarity</option>
              </optgroup>
            </select>

          </div>

          <br>

          <!-- Options for sorting -->
          <h5> Sorting Options </h5>
          <p> Collections can be sorted by the following attributes.
          <p>
          <button onclick="sortCollections('name')" type="button" class="btn btn-sm btn-light"><i class="fas fa-sort"></i> Name</button>
          <button onclick="sortCollections('bogo')" type="button" class="btn btn-sm btn-light"><i class="fas fa-sort"></i> Randomly</button>

          <br>

          <!-- Keyboard tips -->
          <h5> Keyboard Shortcuts</h5>
          <small>
            <table class="table table-sm table-striped table-responsive text-center">
              <tr>
                <td>Cycle Confidence Ellipse (α95, A95)</td>
                <td>Cycle Coordinates</td>
                <td>Save Selected Collections</td>
                <td>Remove Selected Collections</td>
              </tr>
                <td>5</td>
                <td>8</td>
                <td>s</td>
                <td>q</td>
            </table>
          </small>

          <!-- Preferences -->
          <h5> Preferences </h5>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="auto-save" value="option1" checked>
            <label class="form-check-label" for="auto-save"> Auto-save </label>
            &nbsp;
            &nbsp;
            <input class="form-check-input" type="checkbox" id="enable-sound" value="option1" checked>
            <label class="form-check-label" for="enable-sound"> Sound </label>
            &nbsp;
            &nbsp;
            <input class="form-check-input" type="checkbox" id="enable-deenen" value="option1" checked>
            <label class="form-check-label" for="enable-deenen"> Show Deenen Criteria </label>
            &nbsp;
            &nbsp;
            <input class="form-check-input" type="checkbox" id="flip-ellipse" value="option1" checked>
            <label class="form-check-label" for="flip-ellipse"> Flip Confidence Ellipses </label>
          </div>
          <br>
          <br>

          <!-- Reset the application -->
          <h5> Application Reset </h5>
          <p> The application will be resetted as local storage will be cleared. Export your data manually to save it.
          <p>
          <button onclick="clearLocalStorage('statistics')" type="button" class="btn btn-sm btn-danger"><i class="fas fa-times"></i>&nbsp; Reset Local Storage</button>
        
        </div>

      </div>

    </div>

    <footer id="footer-container" class="container text-muted"></footer>

    <br>

    <!-- Modal for generic things -->
    <div class="modal fade" id="map-modal-2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel2" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modal-title"></h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body">
            <div id="modal-container">
          </div>

        </div>
      </div>
      </div>
    </div>

    <!-- Modal for saving a site -->
    <div class="modal fade" id="map-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Save Collection</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body">
            <p> A new collection can be saved from the currently combined selection.
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon1">Collection Name</span>
              </div>
              <input id="modal-name" type="text" class="form-control" placeholder="My Collection" aria-label="Username" aria-describedby="basic-addon1">
            </div>

            <!-- Discard rejected component checkbox -->
            <div class="form-check">
              <input id="modal-discard-rejected" class="form-check-input" type="checkbox" value=""> 
              <label class="form-check-label" for="modal-discard-rejected">
                Discard rejected components
              </label>
            </div>

          </div>

          <div class="modal-footer">
            <button id="modal-confirm" type="button" class="btn btn-success" data-dismiss="modal">Save Collection</button>
          </div>

        </div>
      </div>
    </div>

  </body>

  <!-- jQuery slim and bootstrap -->
  <script src="../lib/jquery-3.3.1/jquery-3.3.1.slim.min.js"></script>
  <script src="../lib/bootstrap-4.3.1/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Highcharts -->
  <script src="../lib/highcharts-7.0.3/code/highcharts.js"></script>
  <script src="../lib/highcharts-7.0.3/code/modules/heatmap.js"></script>
  <script src="../lib/highcharts-7.0.3/code/highcharts-more.js"></script>
  <script src="../lib/highcharts-7.0.3/code/modules/exporting.js"></script>
  <script src="../lib/highcharts-7.0.3/code/modules/offline-exporting.js"></script>

  <!-- Library for multi-select -->
  <script src="../lib/bootstrap-select-1.13.6/dist/js/bootstrap-select.min.js"></script>

  <!-- Shared utilities -->
  <script src="../js/utils.js"></script>
  <script src="../js/highcharts-patch.js"></script>

  <!-- Shared classes -->
  <script src="../js/classes/Exception.js"></script>
  <script src="../js/classes/Direction.js"></script>
  <script src="../js/classes/Pole.js"></script>
  <script src="../js/classes/Location.js"></script>
  <script src="../js/classes/Coordinates.js"></script>
  <script src="../js/classes/Site.js"></script>
  <script src="../js/classes/Distribution.js"></script>
  <script src="../js/classes/Component.js"></script>

  <script src="../lib/numeric-js-1.2.6/numeric.js"></script>

  <!-- Self modules -->
  <script src="./js/graphs.js"></script>
  <script src="./js/index.js"></script>
  <script src="./js/exporting.js"></script>

</html>
